server {
  # Nginx escuchará en el puerto 81 dentro del contenedor
  listen 81;

  # Define la raíz donde se encuentran los archivos de la aplicación
  root /usr/share/nginx/html;

  # Archivo principal a servir
  index index.html;

  location / {
    # Esta línea es crucial para las SPAs.
    # Intenta servir el archivo solicitado ($uri), luego como un directorio ($uri/),
    # y si no encuentra nada, redirige a /index.html para que el router de Angular se encargue.
    try_files $uri $uri/ /index.html;
  }

  # Opcional: Habilitar compresión gzip para mejorar el rendimiento
  gzip on;
  gzip_vary on;
  gzip_proxied any;
  gzip_comp_level 6;
  gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
}